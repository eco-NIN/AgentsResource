# 🚀 上海交通大学智能体星球 - 登录系统启动指南

## 📋 系统概述

您的项目现在已经包含完整的用户认证系统，支持：
- ✅ 用户注册和登录（需要邀请码）
- ✅ JWT令牌认证
- ✅ 用户个人中心
- ✅ 登录状态管理
- ✅ SQLite数据库存储
- ✅ 用户头像系统（预设头像 + 自定义上传）
- ✅ 邀请码验证系统（内部邀请制）

## 🛠️ 环境要求

### 后端要求
- Python 3.8+
- 所需Python包（见 `backend/requirements.txt`）

### 前端要求
- Node.js 16+
- npm 或 yarn

## 🚀 启动步骤

### 1. 启动后端服务器

```bash
# 进入后端目录
cd backend

# 安装依赖
pip install -r requirements.txt

# 启动服务器
python start_server.py
```

后端服务器将在 `http://localhost:8000` 启动

### 2. 启动前端开发服务器

```bash
# 进入前端目录
cd frontend

# 安装依赖（如果还没有安装）
npm install

# 启动开发服务器
npm run dev
```

前端应用将在 `http://localhost:5173` 启动

## 🎯 功能测试

### 注册新用户
1. 访问 `http://localhost:5173`
2. 点击导航栏的"登陆星球"按钮
3. 在登录页面点击"立即注册"切换到注册模式
4. 填写用户信息：
   - 用户名（必填）
   - 邮箱地址（必填）
   - 姓名（必填）- 请填写真实姓名
   - 密码（必填）
   - 邀请码（必填）- 请使用以下任一邀请码：
     - `SJTU2025`
     - `AGENTS001`
     - `PLANET123`
     - `SMART456`
     - `FUTURE789`
5. 点击"加入星球"完成注册

### 用户登录
1. 在登录页面输入用户名和密码
2. 点击"登陆星球"
3. 登录成功后会自动跳转到用户个人中心

### 用户中心功能
- **个人信息**：查看用户基本信息
- **活动历史**：查看账户活动记录
- **账户设置**：管理账户偏好设置

### 登出功能
- 在导航栏点击"登出"按钮即可登出

### 头像功能
- **查看头像**：在导航栏和个人中心可以看到用户头像
- **更换头像**：在个人中心将鼠标悬停在头像上，点击相机图标
- **预设头像**：9种科技主题的渐变头像（机器人、宇航员、火箭等）
- **自定义上传**：支持JPG、PNG格式，最大2MB
- **头像类型**：自动识别并显示不同类型的头像

## 🔧 API文档

后端API自动生成的文档可在以下地址查看：
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

### 主要API端点

- `POST /api/v1/auth/register` - 用户注册
- `POST /api/v1/auth/login` - 用户登录
- `GET /api/v1/auth/me` - 获取当前用户信息
- `PUT /api/v1/auth/avatar` - 更新用户头像
- `POST /api/v1/auth/logout` - 用户登出

## 🗃️ 数据库

系统使用SQLite数据库，数据文件位于：`backend/sjtu_agents.db`

数据库会在首次启动后端时自动创建。

## 🔒 安全特性

- 密码使用bcrypt加密存储
- JWT令牌用于会话管理
- 令牌有效期30分钟
- 前端自动处理令牌刷新

## 🎨 前端特性

- 响应式设计，支持移动端
- 星际主题UI设计
- 实时登录状态同步
- 错误处理和用户反馈
- 路由保护（需要登录的页面）

## 🔧 故障排除

### 后端启动问题
1. 确保Python版本3.8+
2. 检查依赖是否正确安装：`pip list`
3. 查看错误日志

### 前端启动问题
1. 确保Node.js版本16+
2. 删除`node_modules`重新安装：`rm -rf node_modules && npm install`
3. 检查端口5173是否被占用

### 数据库问题
1. 如果是首次使用头像功能，运行数据库重置脚本：`cd backend && python reset_database.py`
2. 删除`backend/sjtu_agents.db`文件重新初始化
3. 检查文件权限
4. 注意：数据库重置后需要重新注册用户

### 邀请码问题
1. 确保输入的邀请码准确无误（区分大小写）
2. 当前有效邀请码请查看 `邀请码管理.md` 文档
3. 如需添加新邀请码，编辑 `backend/app/api/v1/auth.py` 文件
4. 修改邀请码后需要重启后端服务器

### 网络连接问题
1. 确保后端在8000端口运行
2. 检查前端API配置（`frontend/src/services/authService.js`）
3. 检查浏览器控制台的网络请求

## 📞 技术支持

如遇到问题，请查看：
1. 浏览器开发者工具的控制台错误
2. 后端服务器日志
3. 网络请求状态

---

🌟 **祝您在上海交通大学智能体星球上探索愉快！** 🌟 